--// üåÄ NiTroHUB PRO - Final Evolution (Complete Overhaul)
--// ‚ú® by NiTroHUB x Gemini (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
--//
--// ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏´‡∏•‡∏±‡∏Å:
--//   - [FIX] ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏Ç‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
--//   - [FIX] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏Ç‡πà‡πÇ‡∏î‡∏¢‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
--//   - [FIX] ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏¢‡∏±‡∏á‡∏£‡∏±‡∏ô‡∏ï‡πà‡∏≠
--//   - [GUI] ‡∏¢‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå GUI ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
--//   - [GUI] ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤ Main (‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°) ‡πÅ‡∏•‡∏∞ Settings (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)
--//   - [NEW] ‡πÄ‡∏û‡∏¥‡πà‡∏° Loading Screen ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
--//   - [NEW] ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Screen Dimmer (‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≠‡∏°‡∏∑‡∏î) ‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå Anti-AFK
--// =================================================================

-- ==========================
-- ‚öôÔ∏è CONFIG (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
-- ==========================
local EGG_NAME = "Autumn Egg"
local HATCH_AMOUNT = 8
local HATCH_DELAY = 0.1 -- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà 0.1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

local CHEST_CHECK_INTERVAL = 10
local CHEST_COLLECT_COOLDOWN = 60

local CHEST_NAMES = {
    "Royal Chest", "Super Chest", "Golden Chest", "Ancient Chest",
    "Dice Chest", "Infinity Chest", "Void Chest", "Giant Chest",
    "Ticket Chest", "Easy Obby Chest", "Medium Obby Chest", "Hard Obby Chest"
}

local ENABLE_WEBHOOK = false
local WEBHOOK_URL = ""

-- ==========================
-- üß© SERVICES & CORE SETUP
-- ==========================
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local CHEST_LIST = {}
for _, name in ipairs(CHEST_NAMES) do
    CHEST_LIST[name:lower()] = true
end

-- ==========================
-- üì° REMOTE EVENTS & UTILITIES
-- ==========================
local function logmsg(...) print("[NiTroHUB]", ...) end
local function warnmsg(...) warn("[NiTroHUB]", ...) end

local function findRemote(possibleNames)
    for _, obj in ipairs(ReplicatedStorage:GetDescendants()) do
        if obj:IsA("RemoteEvent") then
            local objNameLower = obj.Name:lower()
            for _, name in ipairs(possibleNames) do
                if objNameLower:find(name:lower(), 1, true) then return obj end
            end
        end
    end
    return nil
end

local hatchRemote = findRemote({"HatchEgg", "EggHatch"})
local specificCollectRemote = ReplicatedStorage:WaitForChild("Shared", 2) and ReplicatedStorage.Shared:WaitForChild("Framework", 2) and ReplicatedStorage.Shared.Framework:WaitForChild("Network", 2) and ReplicatedStorage.Shared.Framework.Network:WaitForChild("Remote", 2) and ReplicatedStorage.Shared.Framework.Network.Remote:WaitForChild("RemoteEvent", 2)

if not hatchRemote then warnmsg("‡πÑ‡∏°‡πà‡∏û‡∏ö Hatch RemoteEvent! Auto Hatch ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô") end
if not specificCollectRemote then warnmsg("‡πÑ‡∏°‡πà‡∏û‡∏ö Specific Collect RemoteEvent, ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á") end


-- ==========================
-- üìä STATE (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)
-- ==========================
local hatchRunning = false
local chestRunning = false
local antiAfkRunning = true -- ‡πÄ‡∏õ‡∏¥‡∏î Anti-AFK ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

local eggsHatchedCount = 0
local chestsCollectedCount = 0
local lastCollectedChests = {}
local lastCollectedChestName = "-"
local currentStatus = "Idle"

-- ==========================
-- üöÄ PERFORMANCE & ANIMATION PATCH (*** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß ***)
-- ==========================
-- ‡∏õ‡∏¥‡∏î GUI ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
pcall(function()
    for _, v in ipairs(playerGui:GetChildren()) do
        if v.Name:match("Hatch") or v.Name:match("Egg") then
            v.Enabled = false
        end
    end
    playerGui.ChildAdded:Connect(function(child)
        if child.Name:match("Hatch") or child.Name:match("Egg") then
            task.wait()
            child.Enabled = false
        end
    end)
end)

-- ‡∏õ‡∏¥‡∏î‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏Å‡πÑ‡∏Ç‡πà (‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô)
task.spawn(function()
    local scripts = player:WaitForChild("PlayerScripts"):GetDescendants()
    for _, script in ipairs(scripts) do
        if script:IsA("LocalScript") and script.Name:match("Open") or script.Name:match("Egg") then
            local success, err = pcall(function()
                local env = getfenv and getfenv(script) or getsenv and getsenv(script)
                if env and env.PlayEggAnimation then
                    env.PlayEggAnimation = function() return end
                    logmsg("‚úÖ ‡∏õ‡∏¥‡∏î‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏Ç‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!")
                    return -- ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å loop ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                end
            end)
            if not success then warnmsg("‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏õ‡∏¥‡∏î‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:", err) end
        end
    end
end)


-- ==========================
-- ü•ö AUTO HATCH (*** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß ***)
-- ==========================
task.spawn(function()
    while true do
        if hatchRunning and hatchRemote then
            currentStatus = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ü‡∏±‡∏Å‡πÑ‡∏Ç‡πà..."
            local success, err = pcall(function()
                hatchRemote:FireServer("HatchEgg", EGG_NAME, HATCH_AMOUNT)
                -- ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á FireServer ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (Client-Side Assumption)
                eggsHatchedCount = eggsHatchedCount + HATCH_AMOUNT
            end)
            if not success then
                warnmsg("Auto Hatch ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", err)
                hatchRunning = false -- ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
            end
            task.wait(HATCH_DELAY)
        else
            -- ‡∏£‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ CPU
            task.wait(0.1)
        end
    end
end)

-- ==========================
-- üí∞ AUTO CHEST (*** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß ***)
-- ==========================
local function collectChest(chest)
    if not chest or not chest.Parent or not hrp then return false end

    local key = chest:GetDebugId()
    if lastCollectedChests[key] and (tick() - lastCollectedChests[key] < CHEST_COLLECT_COOLDOWN) then
        return false
    end

    currentStatus = "‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Å‡πá‡∏ö " .. chest.Name
    local success = false

    if specificCollectRemote then
        local remoteSuccess, _ = pcall(function()
            specificCollectRemote:FireServer("ClaimChest", chest.Name, true)
        end)
        if remoteSuccess then success = true; logmsg("üí∞ [Remote] ‡πÄ‡∏Å‡πá‡∏ö Chest:", chest.Name) end
    end

    if not success then
        local trigger = chest:FindFirstChild("TouchTrigger") or chest:FindFirstChildWhichIsA("BasePart")
        if trigger and firetouchinterest then
            firetouchinterest(hrp, trigger, 0); task.wait(0.1); firetouchinterest(hrp, trigger, 1)
            success = true
            logmsg("üí∞ [Touch] ‡πÄ‡∏Å‡πá‡∏ö Chest:", chest.Name)
        end
    end

    if success then
        lastCollectedChests[key] = tick()
        chestsCollectedCount = chestsCollectedCount + 1
        lastCollectedChestName = chest.Name
        -- Webhook ‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á
        return true
    else
        warnmsg("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÑ‡∏î‡πâ: ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö", chest.Name)
        return false
    end
end

task.spawn(function()
    while true do
        if chestRunning then
            currentStatus = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏•‡πà‡∏≠‡∏á..."
            for _, obj in ipairs(Workspace:GetDescendants()) do
                if not chestRunning then break end -- ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
                if obj:IsA("Model") and CHEST_LIST[obj.Name:lower()] then
                    local collected = pcall(collectChest, obj)
                    if collected then
                        -- ‡∏™‡πà‡∏á Webhook ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                        if ENABLE_WEBHOOK and WEBHOOK_URL ~= "" then
                           -- sendWebhook(obj.Name) -- ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Webhook ‡πÉ‡∏´‡πâ‡∏•‡∏ö comment ‡∏≠‡∏≠‡∏Å
                        end
                    end
                    task.wait()
                end
            end
        end
        task.wait(CHEST_CHECK_INTERVAL)
    end
end)


-- ==========================
-- üí§ ANTI AFK
-- ==========================
task.spawn(function()
    local vu = game:GetService("VirtualUser")
    player.Idled:Connect(function()
        if antiAfkRunning then
            vu:Button2Down(Vector2.new(0,0), Workspace.CurrentCamera.CFrame); task.wait(1)
            vu:Button2Up(Vector2.new(0,0), Workspace.CurrentCamera.CFrame);
        end
    end)
end)


-- =================================================================
-- üé® GUI INTERFACE & üïπÔ∏è CONTROLS (*** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ***)
-- =================================================================
-- ‡∏•‡πâ‡∏≤‡∏á GUI ‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
playerGui:FindFirstChild("NiTroHUB_PRO_GUI") and playerGui:FindFirstChild("NiTroHUB_PRO_GUI"):Destroy()
playerGui:FindFirstChild("NiTroHUB_LoadingGUI") and playerGui:FindFirstChild("NiTroHUB_LoadingGUI"):Destroy()

-- Utility Functions for GUI
local function Create(instanceType)
    return function(data)
        local obj = Instance.new(instanceType)
        for k, v in pairs(data) do
            if type(k) == 'number' then
                v.Parent = obj
            else
                obj[k] = v
            end
        end
        return obj
    end
end

-- Loading Screen
local loadingGui = Create'ScreenGui'{
    Name = "NiTroHUB_LoadingGUI",
    IgnoreGuiInset = true,
    ResetOnSpawn = false,
    Parent = playerGui,
    [1] = Create'Frame'{
        Name = "Background",
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundColor3 = Color3.fromRGB(18, 18, 18),
        [1] = Create'TextLabel'{
            Name = "Title",
            Size = UDim2.new(0, 300, 0, 50),
            AnchorPoint = Vector2.new(0.5, 0.5),
            Position = UDim2.fromScale(0.5, 0.45),
            BackgroundTransparency = 1,
            Font = Enum.Font.GothamBold,
            Text = "üåÄ NiTroHUB PRO üåÄ",
            TextColor3 = Color3.fromRGB(0, 225, 255),
            TextSize = 32,
            [1] = Create'UIStroke'{Color = Color3.new(0,0,0), Thickness = 1.5}
        },
        [2] = Create'Frame'{
            Name = "Bar",
            Size = UDim2.new(0, 300, 0, 8),
            AnchorPoint = Vector2.new(0.5, 0.5),
            Position = UDim2.fromScale(0.5, 0.52),
            BackgroundColor3 = Color3.fromRGB(40, 40, 40),
            [1] = Create'UICorner'{CornerRadius = UDim.new(1,0)},
            [2] = Create'Frame'{
                Name = "Progress",
                Size = UDim2.new(0, 0, 1, 0),
                BackgroundColor3 = Color3.fromRGB(0, 225, 255),
                [1] = Create'UICorner'{CornerRadius = UDim.new(1,0)}
            }
        }
    }
}

-- Loading Animation
task.spawn(function()
    local bar = loadingGui.Background.Bar.Progress
    local background = loadingGui.Background
    TweenService:Create(bar, TweenInfo.new(2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {Size = UDim2.new(1, 0, 1, 0)}):Play()
    task.wait(2.5)
    TweenService:Create(background, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
    task.wait(0.5)
    loadingGui:Destroy()
end)

task.wait(3) -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ Loading Screen ‡∏à‡∏ö

-- Main GUI
local gui = Create'ScreenGui'{
    Name = "NiTroHUB_PRO_GUI",
    IgnoreGuiInset = true,
    ResetOnSpawn = false,
    Enabled = true,
    Parent = playerGui
}

-- Screen Dimmer Frame
local screenDimmer = Create'Frame'{
    Name = "ScreenDimmer",
    Size = UDim2.new(1, 0, 1, 0),
    BackgroundColor3 = Color3.new(0, 0, 0),
    BackgroundTransparency = 1, -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô
    ZIndex = -1,
    Parent = gui
}

-- Main Frame
local frame = Create'Frame'{
    Name = "MainFrame",
    Size = UDim2.new(0, 320, 0, 250),
    Position = UDim2.fromScale(0.05, 0.2),
    BackgroundColor3 = Color3.fromRGB(28, 28, 32),
    BorderColor3 = Color3.fromRGB(80, 80, 80),
    Active = true,
    Draggable = true,
    Visible = false, -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ
    Parent = gui,
    [1] = Create'UICorner'{CornerRadius = UDim.new(0, 12)},
    [2] = Create'UIStroke'{Color = Color3.fromRGB(80, 80, 80)}
}

-- Header
local header = Create'Frame'{
    Name = "Header",
    Size = UDim2.new(1, 0, 0, 40),
    BackgroundColor3 = Color3.fromRGB(40, 40, 45),
    Parent = frame,
    [1] = Create'TextLabel'{
        Name = "Title",
        Size = UDim2.new(1, -50, 1, 0),
        Position = UDim2.fromOffset(10, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        Text = "NiTroHUB PRO",
        TextColor3 = Color3.fromRGB(0, 225, 255),
        TextSize = 18,
        TextXAlignment = Enum.TextXAlignment.Left
    },
    [2] = Create'UICorner'{CornerRadius = UDim.new(0, 12)}
}

-- Tabs Container
local tabsContainer = Create'Frame'{
    Name = "TabsContainer",
    Size = UDim2.new(1, 0, 0, 35),
    Position = UDim2.fromOffset(0, 40),
    BackgroundTransparency = 1,
    Parent = frame
}

-- Pages Container
local pagesContainer = Create'Frame'{
    Name = "PagesContainer",
    Size = UDim2.new(1, -20, 1, -85),
    Position = UDim2.fromOffset(10, 75),
    BackgroundTransparency = 1,
    Parent = frame
}

-- Tab Creation Logic
local pages = {}
local function createTab(text)
    local tabButton = Create'TextButton'{
        Name = text .. "Tab",
        Size = UDim2.new(0.5, -5, 1, 0),
        Text = text,
        Font = Enum.Font.GothamSemibold,
        TextSize = 14,
        BackgroundColor3 = Color3.fromRGB(28, 28, 32),
        TextColor3 = Color3.fromRGB(150, 150, 150)
    }

    local page = Create'Frame'{
        Name = text .. "Page",
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        Visible = false,
        Parent = pagesContainer
    }
    pages[text] = page

    tabButton.MouseButton1Click:Connect(function()
        for name, pg in pairs(pages) do
            pg.Visible = (name == text)
        end
        for _, otherTab in ipairs(tabsContainer:GetChildren()) do
            if otherTab:IsA("TextButton") then
                otherTab.BackgroundColor3 = Color3.fromRGB(28, 28, 32)
                otherTab.TextColor3 = Color3.fromRGB(150, 150, 150)
            end
        end
        tabButton.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
        tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    end)
    
    return tabButton
end

local mainTab = createTab("Main")
mainTab.Position = UDim2.fromOffset(5, 0)
mainTab.Parent = tabsContainer

local settingsTab = createTab("Settings")
settingsTab.Position = UDim2.fromScale(0.5, 0)
settingsTab.Parent = tabsContainer

-- Activate Main tab by default
mainTab.MouseButton1Click:Wait()

-- ## Main Page Content ##
local mainPage = pages["Main"]

-- Toggle Button Creator
local function createToggleButton(parent, config)
    local state = false
    local btn = Create'TextButton'{
        Name = config.Name,
        Size = UDim2.new(1, 0, 0, 35),
        Position = config.Position,
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        Parent = parent
    }
    local corner = Create'UICorner'{CornerRadius = UDim.new(0, 8), Parent = btn}
    local stroke = Create'UIStroke'{Color = Color3.fromRGB(120, 120, 120), Parent = btn}
    
    local function updateVisuals()
        local color = state and Color3.fromRGB(76, 175, 80) or Color3.fromRGB(220, 50, 50)
        local text = state and "ON" or "OFF"
        btn.Text = config.Text .. " ["..text.."] ("..config.Hotkey..")"
        btn.BackgroundColor3 = color
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    end
    
    btn.MouseButton1Click:Connect(function()
        state = not state
        updateVisuals()
        if config.Callback then config.Callback(state) end
    end)
    
    updateVisuals()
    return btn, function(newState) state = newState; updateVisuals() end
end

local _, setHatchButton = createToggleButton(mainPage, {
    Name = "AutoHatchButton", Text = "Auto Hatch", Hotkey = "J",
    Position = UDim2.fromOffset(0, 10),
    Callback = function(state) hatchRunning = state end
})

local _, setChestButton = createToggleButton(mainPage, {
    Name = "AutoChestButton", Text = "Auto Chest", Hotkey = "K",
    Position = UDim2.fromOffset(0, 55),
    Callback = function(state) chestRunning = state end
})


-- ## Settings Page Content ##
local settingsPage = pages["Settings"]

-- Stats Display
local statsLabel = Create'TextLabel'{
    Name = "StatsLabel",
    Size = UDim2.new(1, 0, 0, 70),
    BackgroundTransparency = 1,
    Font = Enum.Font.Gotham,
    TextSize = 14,
    TextColor3 = Color3.fromRGB(220, 220, 220),
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    Parent = settingsPage
}

-- Anti-AFK Toggle
local antiAfkLabel = Create'TextLabel'{
    Name = "AntiAfkLabel",
    Size = UDim2.new(0.7, 0, 0, 30),
    Position = UDim2.fromOffset(0, 75),
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamSemibold,
    Text = "Enable Anti-AFK",
    TextColor3 = Color3.fromRGB(220, 220, 220),
    TextXAlignment = Enum.TextXAlignment.Left,
    Parent = settingsPage
}
local _, setAntiAfkButton = createToggleButton(settingsPage, {
    Name = "AntiAfkButton", Text = "", Hotkey = "",
    Position = UDim2.new(0.75, 0, 0, 75),
    Callback = function(state) antiAfkRunning = state end
})
setAntiAfkButton(antiAfkRunning) -- Set initial state


-- Screen Dimmer
local dimmerLabel = Create'TextLabel'{
    Name = "DimmerLabel",
    Size = UDim2.new(1, 0, 0, 20),
    Position = UDim2.fromOffset(0, 110),
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamSemibold,
    Text = "Screen Dimmer",
    TextColor3 = Color3.fromRGB(220, 220, 220),
    TextXAlignment = Enum.TextXAlignment.Left,
    Parent = settingsPage
}
local dimmerSlider = Create'Frame'{
    Name = "DimmerSlider",
    Size = UDim2.new(1, 0, 0, 8),
    Position = UDim2.fromOffset(0, 135),
    BackgroundColor3 = Color3.fromRGB(50, 50, 50),
    Parent = settingsPage,
    [1] = Create'UICorner'{CornerRadius = UDim.new(1,0)}
}
local dimmerHandle = Create'TextButton'{
    Name = "Handle",
    Size = UDim2.new(0, 16, 0, 16),
    Position = UDim2.fromScale(0, 0.5),
    AnchorPoint = Vector2.new(0.5, 0.5),
    BackgroundColor3 = Color3.fromRGB(0, 225, 255),
    Draggable = true,
    Text = "",
    Parent = dimmerSlider,
    [1] = Create'UICorner'{CornerRadius = UDim.new(1,0)}
}
dimmerHandle.Draggable = true
dimmerHandle.DragBegin:Connect(function()
    local mouse = player:GetMouse()
    local conn
    conn = RunService.RenderStepped:Connect(function()
        if not dimmerHandle.Dragging then conn:Disconnect() return end
        local relativeX = math.clamp(mouse.X - dimmerSlider.AbsolutePosition.X, 0, dimmerSlider.AbsoluteSize.X)
        dimmerHandle.Position = UDim2.fromOffset(relativeX, 8)
        local percentage = relativeX / dimmerSlider.AbsoluteSize.X
        screenDimmer.BackgroundTransparency = 1 - percentage * 0.95 -- Max 95% dim
    end)
end)


-- GUI Update Loop
task.spawn(function()
    while task.wait(0.25) do
        if not gui or not gui.Parent then break end
        statsLabel.Text = string.format(
            "Status: %s\nEggs Hatched: %d\nChests Collected: %d\nLast Chest: %s",
            currentStatus, eggsHatchedCount, chestsCollectedCount, lastCollectedChestName
        )
    end
end)


-- Mini Icon to toggle main GUI
local miniIcon = Create'TextButton'{
    Name = "MiniIcon",
    Size = UDim2.new(0, 50, 0, 50),
    Position = UDim2.new(0.02, 0, 0.5, 0),
    Text = "üåÄ",
    Font = Enum.Font.GothamBold,
    TextSize = 28,
    BackgroundColor3 = Color3.fromRGB(28, 28, 32),
    TextColor3 = Color3.fromRGB(0, 255, 255),
    Draggable = true,
    Parent = gui,
    [1] = Create'UICorner'{CornerRadius = UDim.new(1, 0)},
    [2] = Create'UIStroke'{Color = Color3.fromRGB(80, 80, 80)}
}

miniIcon.MouseButton1Click:Connect(function()
    frame.Visible = not frame.Visible
    if frame.Visible then
        frame:TweenSizeAndPosition(UDim2.new(0, 320, 0, 250), frame.Position, "Out", "Quint", 0.3, true)
    end
end)


-- Hotkeys
UserInputService.InputBegan:Connect(function(input, isTyping)
    if isTyping then return end
    if input.KeyCode == Enum.KeyCode.J then
        hatchRunning = not hatchRunning
        setHatchButton(hatchRunning)
    end
    if input.KeyCode == Enum.KeyCode.K then
        chestRunning = not chestRunning
        setChestButton(chestRunning)
    end
end)

logmsg("‚úÖ NiTroHUB PRO (Overhaul) Loaded! | J = ‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏Ç‡πà, K = ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á")
